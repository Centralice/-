{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createMarkup(images) {\n  return `<ul class=\"img-list\">${images\n    .map(\n      img => `<li class=\"item\"><a class=\"link\" href=\"${img.largeImageURL}\"><img class=\"image\"\n//        src=\"${img.webformatURL}\" alt=\"${img.tags}\"></a><div class=\"info\"><div><h3>Likes</h3><p>${img.likes}</p></div><div><h3>Views</h3><p>${img.views}</p></div><div><h3>Comments</h3><p>${img.comments}</p></div><div><h3>Downloads</h3><p>${img.downloads}</p></div></div></li>`\n    )\n    .join('')}</ul>`;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport axios from 'axios';\n\nimport { createMarkup } from '/js/render-functions';\nimport { loadMore } from '../main.js';\n\nconst loader = document.querySelector('.loader');\n\nexport let data;\n\n\n\nexport async function getImages(query, page) {\n  const params = {\n    key: '44273329-392765d5a069e216bf7d20a4c',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  };\n  const url = `https://pixabay.com/api/?${params}`;\n\n  loader.classList.add('is-on');\n\n  try {\n    const response = await axios(url, { params });\n    data = response.data.hits;\n    if (data.length) {\n      const container = document.querySelector('.container');\n      createMarkup(response.data.hits);\n      container.insertAdjacentHTML(\n        'beforeend',\n        createMarkup(data)\n      );\n\n      \n\n      const lightbox = new SimpleLightbox('.container a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      lightbox.refresh();\n    } else {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query',\n        messageColor: '#ffffff',\n        backgroundColor: '#0077b6',\n        position: 'topRight',\n        timeout: 5000,\n      });\n    }\n  } catch (error) {\n    alert(error.message);\n  } finally {\n    loader.classList.remove('is-on');\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImages } from './js/pixabay-api';\n\nconst formEl = document.querySelector('.search-form');\nconst container = document.querySelector('.container');\nexport const loadMore = document.querySelector('.load-more');\nimport { data } from './js/pixabay-api';\n\nlet query;\nlet page = 1;\n\nformEl.addEventListener('submit', handleSearch);\nloadMore.addEventListener('click', onLoadMore);\n\nfunction buttonState() {\n  if (query || data) {\n    loadMore.style.visibility = 'visible';\n  } else {\n    loadMore.style.visibility = 'hidden';\n  }\n}\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  buttonState();\n\n  page = 1;\n  container.innerHTML = '';\n  query = event.target.elements.search.value.trim();\n\n  try {\n    if (!query) {\n      iziToast.error({\n        message: 'Ay caramba! No empty fields, please',\n        messageColor: '#ffffff',\n        backgroundColor: '#d00000',\n        position: 'topRight',\n        timeout: 5000,\n      });\n    } else {\n      getImages(query, page);\n      formEl.reset();\n    }\n  } catch (error) {\n    alert(error);\n  }\n}\n\nasync function onLoadMore() {\n  try {\n    page += 1;\n    buttonState();\n    getImages(query, page);\n  } catch (error) {\n    alert(error.message);\n  }\n}\n"],"names":["createMarkup","images","img","loader","data","getImages","query","page","params","url","response","axios","container","SimpleLightbox","iziToast","error","formEl","loadMore","handleSearch","onLoadMore","buttonState","event"],"mappings":"owBAAO,SAASA,EAAaC,EAAQ,CACnC,MAAO,wBAAwBA,EAC5B,IACCC,GAAO,0CAA0CA,EAAI,aAAa;AAAA,iBACvDA,EAAI,YAAY,UAAUA,EAAI,IAAI,iDAAiDA,EAAI,KAAK,mCAAmCA,EAAI,KAAK,sCAAsCA,EAAI,QAAQ,uCAAuCA,EAAI,SAAS,uBAC1P,EACA,KAAK,EAAE,CAAC,OACb,CCIA,MAAMC,EAAS,SAAS,cAAc,SAAS,EAExC,IAAIC,EAIJ,eAAeC,EAAUC,EAAOC,EAAM,CAC3C,MAAMC,EAAS,CACb,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACd,EACQE,EAAM,4BAA4BD,CAAM,GAE9CL,EAAO,UAAU,IAAI,OAAO,EAE5B,GAAI,CACF,MAAMO,EAAW,MAAMC,EAAMF,EAAK,CAAE,OAAAD,CAAQ,CAAA,EAE5C,GADAJ,EAAOM,EAAS,KAAK,KACjBN,EAAK,OAAQ,CACf,MAAMQ,EAAY,SAAS,cAAc,YAAY,EACrDZ,EAAaU,EAAS,KAAK,IAAI,EAC/BE,EAAU,mBACR,YACAZ,EAAaI,CAAI,CACzB,EAIuB,IAAIS,EAAe,eAAgB,CAClD,aAAc,MACd,aAAc,GACtB,CAAO,EACQ,QAAO,CACtB,MACMC,EAAS,MAAM,CACb,QAAS,wDACT,aAAc,UACd,gBAAiB,UACjB,SAAU,WACV,QAAS,GACjB,CAAO,CAEJ,OAAQC,EAAO,CACd,MAAMA,EAAM,OAAO,CACvB,QAAY,CACRZ,EAAO,UAAU,OAAO,OAAO,CAChC,CACH,CC1DA,MAAMa,EAAS,SAAS,cAAc,cAAc,EAC9CJ,EAAY,SAAS,cAAc,YAAY,EACxCK,EAAW,SAAS,cAAc,YAAY,EAG3D,IAAIX,EACAC,EAAO,EAEXS,EAAO,iBAAiB,SAAUE,CAAY,EAC9CD,EAAS,iBAAiB,QAASE,CAAU,EAE7C,SAASC,GAAc,CACjBd,GAASF,EACXa,EAAS,MAAM,WAAa,UAE5BA,EAAS,MAAM,WAAa,QAEhC,CAEA,eAAeC,EAAaG,EAAO,CACjCA,EAAM,eAAc,EAEpBD,IAEAb,EAAO,EACPK,EAAU,UAAY,GACtBN,EAAQe,EAAM,OAAO,SAAS,OAAO,MAAM,OAE3C,GAAI,CACGf,GASHD,EAAUC,EAAOC,CAAI,EACrBS,EAAO,MAAK,GATZF,EAAS,MAAM,CACb,QAAS,sCACT,aAAc,UACd,gBAAiB,UACjB,SAAU,WACV,QAAS,GACjB,CAAO,CAKJ,OAAQC,EAAO,CACd,MAAMA,CAAK,CACZ,CACH,CAEA,eAAeI,GAAa,CAC1B,GAAI,CACFZ,GAAQ,EACRa,IACAf,EAAUC,EAAOC,CAAI,CACtB,OAAQQ,EAAO,CACd,MAAMA,EAAM,OAAO,CACpB,CACH"}