{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createMarkup(images) {\n  return `<ul class=\"img-list\">${images\n    .map(\n      img => `<li class=\"item\"><a class=\"link\" href=\"${img.largeImageURL}\"><img class=\"image\"\n//        src=\"${img.webformatURL}\" alt=\"${img.tags}\"></a><div class=\"info\"><div><h3>Likes</h3><p>${img.likes}</p></div><div><h3>Views</h3><p>${img.views}</p></div><div><h3>Comments</h3><p>${img.comments}</p></div><div><h3>Downloads</h3><p>${img.downloads}</p></div></div></li>`\n    )\n    .join('')}</ul>`;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport axios from 'axios';\n\nimport { createMarkup } from '/js/render-functions';\n\nexport const loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-more');\nexport let data;\n\nexport async function getImages(query, page) {\n  const params = {\n    key: '44273329-392765d5a069e216bf7d20a4c',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  };\n  const url = `https://pixabay.com/api/?${params}`;\n\n  loader.classList.add('is-on');\n\n  try {\n    const response = await axios(url, { params });\n    data = response.data.hits;\n    const totalHits = response.data.totalHits;\n    if (data.length) {\n      const container = document.querySelector('.container');\n      createMarkup(data);\n      container.insertAdjacentHTML('beforeend', createMarkup(data));\n\n      const loadMoreCheck = () => {\n        if (page < Math.ceil(totalHits / 15)) {\n          loadMore.style.visibility = 'visible';\n        } else {\n          loadMore.style.visibility = 'hidden';\n          iziToast.error({\n            title: \"D'oh!\",\n            message: 'Ran out of pictures :(',\n            messageColor: '#000000',\n            backgroundColor: '#ffb703',\n            position: 'topRight',\n            timeout: 5000,\n          });\n        }\n      };\n\n      loadMoreCheck(page, totalHits);\n\n\n      const lightbox = new SimpleLightbox('.container a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      lightbox.refresh();\n    } else {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query',\n        messageColor: '#ffffff',\n        backgroundColor: '#0077b6',\n        position: 'topRight',\n        timeout: 5000,\n      });\n    }\n  } catch (error) {\n    alert(error.message);\n  } finally {\n    loader.classList.remove('is-on');\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImages } from './js/pixabay-api';\n\nconst formEl = document.querySelector('.search-form');\nconst container = document.querySelector('.container');\nconst loadMore = document.querySelector('.load-more');\nimport { loader } from './js/pixabay-api';\n\nlet query;\nlet page = 1;\n\nformEl.addEventListener('submit', handleSearch);\nloadMore.addEventListener('click', onLoadMore);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  loadMore.style.visibility = 'hidden';  \n\n  page = 1;\n  container.innerHTML = '';\n  query = event.target.elements.search.value.trim();\n\n\n  try {\n    if (!query) {\n      iziToast.error({\n        message: 'Ay caramba! No empty fields, please',\n        messageColor: '#ffffff',\n        backgroundColor: '#d00000',\n        position: 'topRight',\n        timeout: 5000,\n      });\n    } else {\n      getImages(query, page);\n\n      formEl.reset();\n    }\n  } catch (error) {\n    alert(error);\n  }\n}\n\nasync function onLoadMore() {\n  try {\n    loadMore.disabled = true;\n    page += 1;\n    loader.classList.add('is-on');\n    await getImages(query, page);\n\n    const card = document.querySelector('.item');\n    const imgEl = document.querySelector('.image');\n    const cardHeight = card.getBoundingClientRect().height;\n    const imgHeight = imgEl.getBoundingClientRect().height;\n    const totalHeight = cardHeight + imgHeight;\n    window.scrollBy({\n      left: 0,\n      top: totalHeight,\n      behavior: 'smooth',\n    });\n\n  } catch (error) {\n    alert(error.message);\n  } finally {\n    loadMore.disabled = false;\n  }\n}\n"],"names":["createMarkup","images","img","loader","loadMore","data","getImages","query","page","params","url","response","axios","totalHits","container","iziToast","SimpleLightbox","error","formEl","handleSearch","onLoadMore","event","card","imgEl","cardHeight","imgHeight","totalHeight"],"mappings":"owBAAO,SAASA,EAAaC,EAAQ,CACnC,MAAO,wBAAwBA,EAC5B,IACCC,GAAO,0CAA0CA,EAAI,aAAa;AAAA,iBACvDA,EAAI,YAAY,UAAUA,EAAI,IAAI,iDAAiDA,EAAI,KAAK,mCAAmCA,EAAI,KAAK,sCAAsCA,EAAI,QAAQ,uCAAuCA,EAAI,SAAS,uBAC1P,EACA,KAAK,EAAE,CAAC,OACb,CCGO,MAAMC,EAAS,SAAS,cAAc,SAAS,EAChDC,EAAW,SAAS,cAAc,YAAY,EAC7C,IAAIC,EAEJ,eAAeC,EAAUC,EAAOC,EAAM,CAC3C,MAAMC,EAAS,CACb,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACd,EACQE,EAAM,4BAA4BD,CAAM,GAE9CN,EAAO,UAAU,IAAI,OAAO,EAE5B,GAAI,CACF,MAAMQ,EAAW,MAAMC,EAAMF,EAAK,CAAE,OAAAD,CAAQ,CAAA,EAC5CJ,EAAOM,EAAS,KAAK,KACrB,MAAME,EAAYF,EAAS,KAAK,UAChC,GAAIN,EAAK,OAAQ,CACf,MAAMS,EAAY,SAAS,cAAc,YAAY,EACrDd,EAAaK,CAAI,EACjBS,EAAU,mBAAmB,YAAad,EAAaK,CAAI,CAAC,GAEtC,IAAM,CACtBG,EAAO,KAAK,KAAKK,EAAY,EAAE,EACjCT,EAAS,MAAM,WAAa,WAE5BA,EAAS,MAAM,WAAa,SAC5BW,EAAS,MAAM,CACb,MAAO,QACP,QAAS,yBACT,aAAc,UACd,gBAAiB,UACjB,SAAU,WACV,QAAS,GACrB,CAAW,EAEX,GAEoBP,EAAMK,CAAS,EAGZ,IAAIG,EAAe,eAAgB,CAClD,aAAc,MACd,aAAc,GACtB,CAAO,EACQ,QAAO,CACtB,MACMD,EAAS,MAAM,CACb,QAAS,wDACT,aAAc,UACd,gBAAiB,UACjB,SAAU,WACV,QAAS,GACjB,CAAO,CAEJ,OAAQE,EAAO,CACd,MAAMA,EAAM,OAAO,CACvB,QAAY,CACRd,EAAO,UAAU,OAAO,OAAO,CAChC,CACH,CCtEA,MAAMe,EAAS,SAAS,cAAc,cAAc,EAC9CJ,EAAY,SAAS,cAAc,YAAY,EAC/CV,EAAW,SAAS,cAAc,YAAY,EAGpD,IAAIG,EACAC,EAAO,EAEXU,EAAO,iBAAiB,SAAUC,CAAY,EAC9Cf,EAAS,iBAAiB,QAASgB,CAAU,EAE7C,eAAeD,EAAaE,EAAO,CACjCA,EAAM,eAAc,EACpBjB,EAAS,MAAM,WAAa,SAE5BI,EAAO,EACPM,EAAU,UAAY,GACtBP,EAAQc,EAAM,OAAO,SAAS,OAAO,MAAM,OAG3C,GAAI,CACGd,GASHD,EAAUC,EAAOC,CAAI,EAErBU,EAAO,MAAK,GAVZH,EAAS,MAAM,CACb,QAAS,sCACT,aAAc,UACd,gBAAiB,UACjB,SAAU,WACV,QAAS,GACjB,CAAO,CAMJ,OAAQE,EAAO,CACd,MAAMA,CAAK,CACZ,CACH,CAEA,eAAeG,GAAa,CAC1B,GAAI,CACFhB,EAAS,SAAW,GACpBI,GAAQ,EACRL,EAAO,UAAU,IAAI,OAAO,EAC5B,MAAMG,EAAUC,EAAOC,CAAI,EAE3B,MAAMc,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAaF,EAAK,sBAAqB,EAAG,OAC1CG,EAAYF,EAAM,sBAAqB,EAAG,OAC1CG,EAAcF,EAAaC,EACjC,OAAO,SAAS,CACd,KAAM,EACN,IAAKC,EACL,SAAU,QAChB,CAAK,CAEF,OAAQT,EAAO,CACd,MAAMA,EAAM,OAAO,CACvB,QAAY,CACRb,EAAS,SAAW,EACrB,CACH"}